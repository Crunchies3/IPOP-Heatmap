<script>

  function filterByColor(color) {
    // Clear the map
    map.eachLayer(function (layer) {
      if (layer instanceof L.Polyline) {
        map.removeLayer(layer);
      }
    });

    var filter = document.getElementById("search-input").value;
    var cableSystem = convertSearchTerm(filter);

    if (cableSystem !== "ALL") {

      Object.keys(polylines[cableSystem]).forEach(function (cableName) {
        var item = polylines[cableSystem][cableName];
        console.log("item:", item);
        if (item["options"].color === color) {
          item.addTo(map);
        }
      });

    } else {
      Object.keys(polylines).forEach(function (type) {
        Object.keys(polylines[type]).forEach(function (cableName) {
          var item = polylines[type][cableName];
          console.log("item:", item);
          if (item["options"].color === color) {
            item.addTo(map);
          }
        });
      });
    }
  }

  // Example usage:
  function redCables() {
    filterByColor("red");
  }

  function yellowCables() {
    filterByColor("yellow");
  }

  function greenCables() {
    filterByColor("green");
  }


  function convertSearchTerm(searchTerm) {
    if (searchTerm === "Show All Cable Systems") return "ALL";
    else if (searchTerm === "TGN-IA/TGN-P") return "TGN";
    else return searchTerm;
  }

</script>