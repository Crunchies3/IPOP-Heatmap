<script>

  var selectedEntries = {};
  var unselectedEntries = {};

  //---------------------------------------Button function for filters-------------------------------//
  function redCables() {

    Object.keys(polylinesData).forEach(key => {
      var element = polylinesData[key];
      map.addLayer(element);
    });

    var search = document.getElementById("search-input").value;
    var searchTerm = convertSearchTerm(search);

    var filteredEntries
    var unfilteredEntries

    console.log("++++++++++++++++");
    console.log(polylinesData);

    console.log(searchTerm);

    if (searchTerm === "ALL") {

      console.log("all nigana bako?????");
      selectedEntries = polylinesData; // polylinesData can be found in script_js.html file
      unselectedEntries = {};
    } else {

      console.log("lahi ni siya nigana bako?????");

      filteredEntries = Object.entries(polylinesData).filter(([key, _]) => key.includes(searchTerm));

      console.log(filteredEntries);

      selectedEntries = Object.fromEntries(filteredEntries); // Convert the filtered entries back into an object

      console.log("humana kog gana?????");

      unfilteredEntries = Object.entries(polylinesData).filter(([key, _]) => !key.includes(searchTerm));
      unselectedEntries = Object.fromEntries(unfilteredEntries); // Convert the filtered entries back into an object
      console.log("===================");
      console.log(unselectedEntries);
    }

    console.log("///////////////////////////");
    console.log(selectedEntries);

    unfilteredEntries = Object.entries(selectedEntries).filter(([key, value]) => value.options.color !== "red");
    unfilteredEntries = Object.fromEntries(unfilteredEntries);


    console.log("ssssssssssssssssssssssssssssssssssssss");
    console.log(unfilteredEntries);

    // Merge filteredUnselectedEntries into unselectedEntries
    unselectedEntries = { ...unselectedEntries, ...unfilteredEntries };

    console.log("===================");
    console.log(unselectedEntries);


    Object.keys(unselectedEntries).forEach(key => {
      var element = unselectedEntries[key];
      map.removeLayer(element);
    });
    console.log("=======humana============");
  }

  // Function to search for a cable system and filter the cables accordingly
  function yellowCables() {

    Object.keys(polylinesData).forEach(key => {
      var element = polylinesData[key];
      map.addLayer(element);
    });

    var search = document.getElementById("search-input").value;
    var searchTerm = convertSearchTerm(search);

    var filteredEntries = {};
    var unfilteredEntries = {};

    console.log("++++++++++++++++");
    console.log(polylinesData);

    console.log(searchTerm);

    if (searchTerm === "ALL") {

      console.log("all nigana bako?????");
      selectedEntries = polylinesData; // polylinesData can be found in script_js.html file
      unselectedEntries = {};
    } else {

      console.log("lahi ni siya nigana bako?????");

      filteredEntries = Object.entries(polylinesData).filter(([key, _]) => key.includes(searchTerm));

      console.log(filteredEntries);

      selectedEntries = Object.fromEntries(filteredEntries); // Convert the filtered entries back into an object

      console.log("humana kog gana?????");

      unfilteredEntries = Object.entries(polylinesData).filter(([key, _]) => !key.includes(searchTerm));
      unselectedEntries = Object.fromEntries(unfilteredEntries); // Convert the filtered entries back into an object
      console.log("===================");
      console.log(unselectedEntries);
    }

    console.log("///////////////////////////");
    console.log(selectedEntries);

    unfilteredEntries = Object.entries(selectedEntries).filter(([key, value]) => value.options.color !== "yellow");
    unfilteredEntries = Object.fromEntries(unfilteredEntries);


    console.log("ssssssssssssssssssssssssssssssssssssss");
    console.log(unfilteredEntries);

    // Merge filteredUnselectedEntries into unselectedEntries
    unselectedEntries = { ...unselectedEntries, ...unfilteredEntries };

    console.log("===================");
    console.log(unselectedEntries);


    Object.keys(unselectedEntries).forEach(key => {
      var element = unselectedEntries[key];
      map.removeLayer(element);
    });
    console.log("=======humana============");
  }

  function greenCables() {

    Object.keys(polylinesData).forEach(key => {
      var element = polylinesData[key];
      map.addLayer(element);
    });

    var search = document.getElementById("search-input").value;
    var searchTerm = convertSearchTerm(search);

    var filteredEntries
    var unfilteredEntries

    console.log("++++++++++++++++");
    console.log(polylinesData);

    console.log(searchTerm);

    if (searchTerm === "ALL") {

      console.log("all nigana bako?????");
      selectedEntries = polylinesData; // polylinesData can be found in script_js.html file
      unselectedEntries = {};
    } else {

      console.log("lahi ni siya nigana bako?????");

      filteredEntries = Object.entries(polylinesData).filter(([key, _]) => key.includes(searchTerm));

      console.log(filteredEntries);

      selectedEntries = Object.fromEntries(filteredEntries); // Convert the filtered entries back into an object

      console.log("humana kog gana?????");

      unfilteredEntries = Object.entries(polylinesData).filter(([key, _]) => !key.includes(searchTerm));
      unselectedEntries = Object.fromEntries(unfilteredEntries); // Convert the filtered entries back into an object
      console.log("===================");
      console.log(unselectedEntries);
    }

    console.log("///////////////////////////");
    console.log(selectedEntries);

    unfilteredEntries = Object.entries(selectedEntries).filter(([key, value]) => value.options.color !== "green");
    unfilteredEntries = Object.fromEntries(unfilteredEntries);


    console.log("ssssssssssssssssssssssssssssssssssssss");
    console.log(unfilteredEntries);

    // Merge filteredUnselectedEntries into unselectedEntries
    unselectedEntries = { ...unselectedEntries, ...unfilteredEntries };

    console.log("===================");
    console.log(unselectedEntries);


    Object.keys(unselectedEntries).forEach(key => {
      var element = unselectedEntries[key];
      map.removeLayer(element);
      console.log(element);
    });
    console.log("=======humana============");
  }


  function convertSearchTerm(searchTerm) {
    if (searchTerm === "Show All Cable Systems") return "ALL";
    else if (searchTerm === "TGN-IA/TGN-P") return "TGN";
    else return searchTerm;
  }

</script>